webpackJsonp([5],{kxys:function(e,t){},s8T2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("zKIC"),a=i("bdqz"),o=i("p4mW"),n=i("hCKk"),l={name:"roleManage",data:function(){return{queryInfo:"",tableData:[],total:0,currentPage:1,pageSize:10,dialogVisible:!1,editDialogVisible:!1,form:{name:"",description:""},formEdit:{name:"",description:"",id:""}}},mounted:function(){this.role_info()},methods:{role_info:function(){var e=this,t={sortProperties:this.queryInfo,pageIndex:this.currentPage,pageSize:this.pageSize,sortDirection:"ASC",parameterType:"BASIC"};Object(r.e)(t).then(function(t){""==t.name&&(e.tableData=t.data.items,e.total=t.data.itemCount)})},add_role:function(){o.a.checkResource(a.a.ROLE_ADD)?this.dialogVisible=!0:this.$message.error("您无权这么做")},role_search:function(){this.currentPage=1,this.role_info()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1},handleCurrentChange:function(e){this.currentPage=e},editList:function(e,t){if(o.a.checkResource(a.a.ROLE_UPDATE)){if("ROOT"===t.type)return void this.$message.error("您无权这么做");this.formEdit.id=t.id,this.formEdit.name=t.name,this.formEdit.description=t.description,this.editDialogVisible=!0}else this.$message.error("您无权这么做")},editRole:function(e,t){if(o.a.checkResource(a.a.ROLE_UPDATE)){if("ROOT"===t.type)return void this.$message.error("您无权这么做");this.$router.push({path:"/roleEdit",query:{id:t.id}})}else this.$message.error("您无权这么做")},addCancel:function(){this.form={name:"",description:""},this.dialogVisible=!1},addOk:function(){var e=this;Object(r.f)(this.form).then(function(t){""==t.name&&(e.form={name:"",description:""},e.dialogVisible=!1,e.role_search())})},EditCancel:function(){this.formEdit={name:"",description:"",id:""},this.editDialogVisible=!1},EditOk:function(){var e=this;Object(r.g)(this.formEdit).then(function(t){""==t.name&&(e.formEdit={name:"",description:"",id:""},e.editDialogVisible=!1,e.role_search())})},formatCreated:function(e,t,i){return i?n.a.fullFormatter(new Date(i)):""}}},s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:20}},[i("el-card",{staticStyle:{padding:"10px"},attrs:{shadow:"never"}},[i("el-row",[i("el-col",{attrs:{span:20,xs:24}},[i("el-row",[i("el-col",{attrs:{span:4}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.add_role()}}},[e._v("添加角色")])],1),e._v(" "),i("el-col",{attrs:{span:7}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:e.queryInfo,callback:function(t){e.queryInfo=t},expression:"queryInfo"}})],1)],1)],1),e._v(" "),i("el-col",{staticClass:"text-right",attrs:{span:4,xs:24}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.role_search()}}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"id",label:"角色ID"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"角色类型"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"角色名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),i("el-table-column",{attrs:{prop:"created",label:"创建时间",formatter:e.formatCreated}}),e._v(" "),i("el-table-column",{attrs:{prop:"updated",label:"修改时间",formatter:e.formatCreated}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(i){return e.editRole(t.$index,t.row)}}},[e._v("\n              修改权限\n            ")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(i){return e.editList(t.$index,t.row)}}},[e._v("\n              编辑\n            ")])]}}])})],1),e._v(" "),i("el-row",[i("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"添加角色",visible:e.dialogVisible,width:"50%","destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{attrs:{model:e.form,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{type:"text"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{type:"text"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.addCancel()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOk()}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"修改角色",visible:e.editDialogVisible,width:"50%","destroy-on-close":""},on:{"update:visible":function(t){e.editDialogVisible=t}}},[i("el-form",{attrs:{model:e.formEdit,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称",prop:"name"}},[i("el-input",{attrs:{type:"text"},model:{value:e.formEdit.name,callback:function(t){e.$set(e.formEdit,"name",t)},expression:"formEdit.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"description"}},[i("el-input",{attrs:{type:"text"},model:{value:e.formEdit.description,callback:function(t){e.$set(e.formEdit,"description",t)},expression:"formEdit.description"}})],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.EditCancel()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.EditOk()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(l,s,!1,function(e){i("kxys")},"data-v-e6ca6d2e",null);t.default=c.exports}});
//# sourceMappingURL=5.7bb194d36d4569b71da8.js.map