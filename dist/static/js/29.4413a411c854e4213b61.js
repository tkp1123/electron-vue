webpackJsonp([29],{"8MeJ":function(t,a){},Iu5l:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("zKIC"),l=e("hCKk"),r={name:"taskInformation",data:function(){return{parameterName:"",productionBatchCode:"",orderBy:"",taskStatus:"",total:0,currentPage:1,pageSize:10,value1:"",taskDataCount:"",tableData:[],taskNumber:[],issueTask:[]}},created:function(){this.parameterName=this.$store.state.parameterName.parameterName},mounted:function(){this.getIssue_task(),this.get_task_data_count()},methods:{getIssue_task:function(){var t=this,a={pageIndex:this.currentPage,pageSize:this.pageSize,sortDirection:"DESC",productionBatchCode:"",sortProperties:"",taskStatus:this.taskStatus,createBegin:l.a.dateValue(this.value1[0]),createEnd:l.a.dateValue(this.value1[1])};switch(this.orderBy){case"nokQuantityASC":a.sortProperties="nokQuantity",a.sortDirection="ASC";break;case"nokQuantityDESC":a.sortProperties="nokQuantity",a.sortDirection="DESC";break;case"scrappedQuantityASC":a.sortProperties="scrappedQuantity",a.sortDirection="ASC";break;case"scrappedQuantityDESC":a.sortProperties="scrappedQuantity",a.sortDirection="DESC"}Object(s.A)(a).then(function(a){if(console.log(a),""==a.name&&(t.tableData=a.data.items,t.total=a.data.itemCount,a.data.extras.length>0)){if(a.data.extras[0].taskNumber&&(t.taskNumber=a.data.extras[0].taskNumber,t.taskNumber.length>0))for(var e=0;e<t.tableData.length;e++)for(var s=0;s<t.taskNumber.length;s++)t.tableData[e].id==t.taskNumber[s].id&&(t.tableData[e].taskNumber=t.taskNumber[s].taskNumber,t.tableData[e].completeNumber=t.taskNumber[s].completeNumber);if(a.data.extras[0].issueTask&&(t.issueTask=a.data.extras[0].issueTask,t.issueTask.length>0))for(var l=0;l<t.tableData.length;l++)for(var r=0;r<t.issueTask.length;r++)t.tableData[l].issueTaskId==t.issueTask[r].id&&(t.tableData[l].requestCode=t.issueTask[r].requestCode,t.tableData[l].lineCode=t.issueTask[r].lineCode,t.tableData[l].operationCode=t.issueTask[r].operationCode,t.tableData[l].operationShortName=t.issueTask[r].operationShortName)}})},get_task_data_count:function(){var t=this;Object(s.E)().then(function(a){console.log(a),t.taskDataCount=a.data})},getIssue_task_search:function(){this.currentPage=1,this.getIssue_task()},dateValue:function(t){return t?new Date(t).valueOf():""},handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getIssue_task()},handleCurrentChange:function(t){this.currentPage=t,this.getIssue_task()},handleDetail:function(t,a){this.$router.push({path:"/taskInformationDetail",query:{id:a.issueTaskId}})},formatDate:function(t,a,e){return e?l.a.fullFormatter(new Date(e)):""},formatUpdated:function(t,a,e){return e?l.a.fullFormatter(new Date(e)):""}}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:12,xs:24,sm:24,md:24,lg:24,xl:12}},[e("el-card",{staticStyle:{margin:"30px"},attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[e("div",{staticClass:"dp-fx"},[e("div",{staticClass:"dp-fx-title"},[t._v("信息总览")])])]),t._v(" "),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:24,xs:24}},[e("el-row",[e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("批次总数 :"+t._s(t.taskDataCount.batchNumber))]),t._v(" "),e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("已完成批次总次数 :"+t._s(t.taskDataCount.completeBatchNumber))])],1),t._v(" "),e("el-row",[e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("任务总数 :"+t._s(t.taskDataCount.taskNumber))]),t._v(" "),e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("已完成任务总次数 :"+t._s(t.taskDataCount.taskCompleteNumber))])],1),t._v(" "),e("el-row",[e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("板件总数 :"+t._s(t.taskDataCount.partNumber))]),t._v(" "),e("el-col",{staticClass:"panel-content-title",attrs:{span:12,xs:24,sm:24,md:24,lg:12,xl:12}},[t._v("已完成板件总数 :"+t._s(t.taskDataCount.partCompleteNumber))])],1)],1),t._v(" "),e("el-col",{attrs:{span:12,xs:24}})],1)],1)],1)],1),t._v(" "),e("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:20}},[e("el-card",{staticStyle:{padding:"10px"},attrs:{shadow:"never"}},[e("el-row",[e("el-col",{attrs:{span:20,xs:24}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{staticClass:"col-padd",attrs:{span:6,xl:6,lg:12,md:12,sm:12,xs:24}},[e("el-input",{attrs:{clearable:"",placeholder:"请输入生产批次号"},model:{value:t.productionBatchCode,callback:function(a){t.productionBatchCode=a},expression:"productionBatchCode"}})],1),t._v(" "),e("el-col",{staticClass:"col-padd",attrs:{span:6,xl:6,lg:12,md:12,sm:12,xs:24}},[e("el-select",{attrs:{placeholder:"请选择排序"},model:{value:t.orderBy,callback:function(a){t.orderBy=a},expression:"orderBy"}},[e("el-option",{attrs:{label:"不良品由高到低",value:"nokQuantityDESC"}}),t._v(" "),e("el-option",{attrs:{label:"不良品由低到高",value:"nokQuantityASC"}}),t._v(" "),e("el-option",{attrs:{label:"报废由高到低",value:"scrappedQuantityDESC"}}),t._v(" "),e("el-option",{attrs:{label:"报废由低到高",value:"scrappedQuantityASC"}})],1)],1),t._v(" "),e("el-col",{staticClass:"col-padd",attrs:{span:6,xl:6,lg:12,md:12,sm:12,xs:24}},[e("el-select",{attrs:{placeholder:"请选择完成状态"},model:{value:t.taskStatus,callback:function(a){t.taskStatus=a},expression:"taskStatus"}},[e("el-option",{attrs:{label:"已完成",value:"COMPLETE"}}),t._v(" "),e("el-option",{attrs:{label:"进行中",value:"PROCESSING"}}),t._v(" "),e("el-option",{attrs:{label:"未执行",value:"INITIAL"}})],1)],1),t._v(" "),e("el-col",{staticClass:"col-padd",attrs:{span:6,xl:6,lg:12,md:12,sm:12,xs:24}},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"起始日期","end-placeholder":"截至日期"},model:{value:t.value1,callback:function(a){t.value1=a},expression:"value1"}})],1)],1)],1),t._v(" "),e("el-col",{staticClass:"text-right",attrs:{span:4,xs:24}},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.getIssue_task_search()}}},[t._v("查询")])],1)],1)],1)],1),t._v(" "),e("el-row",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[e("el-table-column",{attrs:{prop:"requestCode",label:"请求编号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"lineCode",label:"产线编号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"operationCode",label:"工序编号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"operationShortName",label:"工序短名称"}}),t._v(" "),e("el-table-column",{attrs:{prop:"partMatCode",label:"产出物料的物料编码"}}),t._v(" "),e("el-table-column",{attrs:{prop:"partMatDescription",label:"产出物料的物料名称或描述"}}),t._v(" "),e("el-table-column",{attrs:{prop:"productionBatchCode",label:"生产批次号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"created",label:"请求(操作)时间",formatter:t.formatDate}}),t._v(" "),"029"!=t.parameterName?e("el-table-column",{attrs:{prop:"nokQuantity",label:"不良品数量"}}):t._e(),t._v(" "),"029"==t.parameterName?e("el-table-column",{attrs:{prop:"nokQuantity",label:"消耗数量"}}):t._e(),t._v(" "),"029"==t.parameterName?e("el-table-column",{attrs:{prop:"nokQuantity",label:"多产出数量"}}):t._e(),t._v(" "),e("el-table-column",{attrs:{prop:"scrappedQuantity",label:"报废品数量"}}),t._v(" "),e("el-table-column",{attrs:{prop:"taskNumber",label:"总任务数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"completeNumber",label:"已完成任务数"}}),t._v(" "),e("el-table-column",{attrs:{prop:"taskStatus",label:"完成状态"},scopedSlots:t._u([{key:"default",fn:function(a){return["INITIAL"==a.row.taskStatus?e("span",[t._v("未执行")]):"PROCESSING"==a.row.taskStatus?e("span",[t._v("进行中")]):e("span",[t._v("已完成")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"updated",label:"任务完成时间",formatter:t.formatUpdated}}),t._v(" "),e("el-table-column",{attrs:{prop:"reportWork",label:"是否报工"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.reportWork?e("span",[t._v("是")]):e("span",[t._v("否")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"dataSource",label:"数据来源"},scopedSlots:t._u([{key:"default",fn:function(a){return["1"==a.row.dataSource?e("span",[t._v("MES")]):e("span",[t._v("自建工单")])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"工艺信息"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.handleDetail(a.$index,a.row)}}},[t._v("详情")])]}}])})],1),t._v(" "),e("el-row",[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)],1)},staticRenderFns:[]};var n=e("VU/8")(r,o,!1,function(t){e("8MeJ")},"data-v-2daf5bbd",null);a.default=n.exports}});
//# sourceMappingURL=29.4413a411c854e4213b61.js.map