webpackJsonp([24],{"N/KC":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("zKIC"),s=r("bdqz"),o=r("p4mW"),n=r("hCKk"),i={name:"userManage",data:function(){return{queryInfo:"",tableData:[],total:0,currentPage:1,pageSize:10,dialogVisible:!1,form:{password:"",trueName:"",userName:"",roleId:""},roleList:[]}},mounted:function(){this.user_info()},methods:{user_info:function(){var e=this,t={sortProperties:this.queryInfo,pageIndex:this.currentPage,pageSize:this.pageSize,sortDirection:"ASC",parameterType:"BASIC"};Object(a.i)(t).then(function(t){""==t.name&&(e.tableData=t.data.items,e.total=t.data.itemCount,e.get_api_role())})},get_api_role:function(){var e=this;Object(a.e)({pageIndex:1,pageSize:100,sortDirection:"ASC"}).then(function(t){""==t.name&&(e.roleList=t.data.items)})},user_add:function(){o.a.checkResource(s.a.USERS_ADD)?this.dialogVisible=!0:this.$message.error("您无权这么做")},user_search:function(){this.currentPage=1,this.user_info()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1},handleCurrentChange:function(e){this.currentPage=e},editList:function(e,t){console.log(o.a.checkResource(s.a.USERS_UPDATE)),o.a.checkResource(s.a.USERS_UPDATE)?this.$router.push({path:"/userEdit",query:{id:t.id}}):this.$message.error("您无权这么做")},deleteList:function(e,t){var r=this;o.a.checkResource(s.a.USERS_DELETE)?this.$confirm("是否删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.k)(t).then(function(e){""==e.name&&(r.$message({message:"删除成功",type:"success"}),r.user_search())})}):this.$message.error("您无权这么做")},addCancel:function(){this.form={password:"",trueName:"",userName:"",roleId:""},this.dialogVisible=!1},addOk:function(){var e=this;""!=this.form.userName?""!=this.form.trueName?""!=this.form.password?""!=this.form.roleId?Object(a.m)(this.form).then(function(t){""==t.name?(e.form={password:"",trueName:"",userName:"",roleId:""},e.dialogVisible=!1,e.$message({message:"创建成功",type:"success"}),e.user_search()):e.$message.error(t.message)}):this.$message.error("请输入选择角色"):this.$message.error("请输入密码"):this.$message.error("请输入真实名称"):this.$message.error("请输入登录名称")},formatRegisterDate:function(e,t,r){return r?n.a.fullFormatter(new Date(r)):""}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("el-row",{staticStyle:{padding:"10px"},attrs:{gutter:20}},[r("el-card",{staticStyle:{padding:"10px"},attrs:{shadow:"never"}},[r("el-row",[r("el-col",{attrs:{span:20,xs:24}},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.user_add()}}},[e._v("添加用户")])],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{clearable:"",placeholder:"请输入名称"},model:{value:e.queryInfo,callback:function(t){e.queryInfo=t},expression:"queryInfo"}})],1)],1)],1),e._v(" "),r("el-col",{staticClass:"text-right",attrs:{span:4,xs:24}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.user_search()}}},[e._v("查询")])],1)],1)],1)],1),e._v(" "),r("el-row",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[r("el-table-column",{attrs:{prop:"userName",label:"登录名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"trueName",label:"真实名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userStatus",label:"用户状态"},scopedSlots:e._u([{key:"default",fn:function(t){return["OFFLINE"==t.row.userStatus?r("span",[e._v("不在线")]):"ONLINE"==t.row.userStatus?r("span",[e._v("在线")]):e._e()]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"registerDate",label:"注册时间",formatter:e.formatRegisterDate}}),e._v(" "),r("el-table-column",{attrs:{prop:"loginDate",label:"登录时间",formatter:e.formatRegisterDate}}),e._v(" "),r("el-table-column",{attrs:{prop:"signOutDate",label:"退出时间",formatter:e.formatRegisterDate}}),e._v(" "),r("el-table-column",{attrs:{prop:"updated",label:"修改时间",formatter:e.formatRegisterDate}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(r){return e.editList(t.$index,t.row)}}},[e._v("\n              编辑\n            ")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteList(t.$index,t.row)}}},[e._v("\n              删除\n            ")])]}}])})],1),e._v(" "),r("el-row",[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisible,width:"50%","destroy-on-close":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{attrs:{model:e.form,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"登录名称",prop:"name"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"真实名称",prop:"name"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.trueName,callback:function(t){e.$set(e.form,"trueName",t)},expression:"form.trueName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"name"}},[r("el-input",{attrs:{type:"text"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色"}},[r("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.form.roleId,callback:function(t){e.$set(e.form,"roleId",t)},expression:"form.roleId"}},e._l(e.roleList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.addCancel()}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOk()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var u=r("VU/8")(i,l,!1,function(e){r("f8p9")},"data-v-3d174f00",null);t.default=u.exports},f8p9:function(e,t){}});
//# sourceMappingURL=24.7c0dceb5392770394145.js.map